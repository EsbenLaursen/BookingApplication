@model BookingApp.Models.BookingIndexViewModel
@using Newtonsoft.Json
@{
    ViewBag.Title = "BookingCheckout";
}

<h2>Booking Checkout</h2>
       

        <div class="panel panel-default">
            <div class="panel-heading">Bjørn Eksperiment Zone.</div>
            <div class="panel-body">
                <div class="row">
                    <p class="col-md-2 col-sm-6 col-xs-12">Start Dato:</p>
                    <input type="text" id="datepicker" class="datepickerInput col-xs-12 col-sm-6 col-md-10">
                </div>
                <div class="row">
                    <p class="col-md-2 col-sm-6 col-xs-12">Slut Dato:</p>
                    <input type="text" id="datepicker2" class="datepickerInput col-xs-12 col-sm-6 col-md-10">
                </div>

                <br />
                <br />
                <a class="btn btn-default" id="refreshBtn"><i class="fa fa-refresh" aria-hidden="true"></i></a>
                <input id="datepicker3" type="text"/>
            </div>
        </div>




<script>

    function convertDate(unformattedDate) {
        var dateString = unformattedDate.substr(6);
        var currentTime = new Date(parseInt(dateString ));
        var month = currentTime.getMonth() + 1;
        var day = currentTime.getDate();
        var year = currentTime.getFullYear();
        var date = year + "/" + month + "/" + day;
        return date;
    };

    $(document).ready(function () {

            $(".datepickerInput").datepicker({
                dateFormat: "dd-mm-yy",
                monthNames: ["Januar", "Februar", "Marts", "April", "Maj", "Juni", "Juli", "August", "September", "Oktober", "November", "December"],
                showOtherMonths: true,
                showWeek: "W",
                weekHeader: "#",
                minDate: 0,
            });

            $("#refreshBtn").click(function () {

            var dateArray = [];
            var data = @Html.Raw(Json.Encode(Model.UnavailableDates));

                for(var key in data)
                {
                    if (data.hasOwnProperty(key)) {
                        var thedate = convertDate(data[key]);
                        var newDate = new Date(thedate);
                        dateArray.push($.datepicker.formatDate('yy-mm-dd', newDate));
                    }
                }  

            $('#datepicker3').datepicker({
                beforeShowDay:
                    function (date) {
                        var string = jQuery.datepicker.formatDate('yy-mm-dd', date);
                        return [dateArray.indexOf(string) == -1]
                    }
                });
            });
    });
</script>















@*<div class="row" style="padding-top: 2.5%">
        <div class="col-sm-5">
        <label for="LastName" style="width: 85px">Last name:</label>
        <input name="LastName" type="text" value="" id="LastName">
        </div>
        <div class="col-sm-1"></div>
        <div class="col-sm-6"></div>
    </div>*@


